<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Project - Full Stack Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #858796;
            --success-color: #1cc88a;
            --info-color: #36b9cc;
            --warning-color: #f6c23e;
            --danger-color: #e74a3b;
            --light-bg: #f8f9fc;
        }
        
        body {
            background-color: var(--light-bg);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
            gap: 20px;
        }
        
        .explanation-panel {
            flex: 0 0 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        
        .app-content {
            flex: 1;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid #e3e6f0;
            font-weight: 700;
            padding: 15px 20px;
        }
        
        .stats-card {
            border-left: 4px solid;
        }
        
        .stats-card.primary { border-left-color: var(--primary-color); }
        .stats-card.success { border-left-color: var(--success-color); }
        .stats-card.info { border-left-color: var(--info-color); }
        .stats-card.warning { border-left-color: var(--warning-color); }
        
        .chart-container {
            position: relative;
            height: 250px;
        }
        
        .backend-panel {
            background-color: #f8f9fc;
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }
        
        .nav-tabs .nav-link.active {
            font-weight: bold;
            border-bottom: 3px solid var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="explanation-panel">
            <h3 class="text-primary">Survey Project</h3>
            <p class="mt-4">This demo shows both <strong>frontend</strong> and simulated <strong>backend</strong> functionality.</p>
            
            <div class="backend-panel">
                <h5>Backend Simulation</h5>
                <p>The JavaScript code includes a simulated backend with:</p>
                <ul>
                    <li>Data storage</li>
                    <li>API endpoints</li>
                    <li>Data processing</li>
                </ul>
                <button class="btn btn-sm btn-outline-primary" id="simulateBackend">Simulate API Call</button>
                <div class="mt-2" id="apiResponse"></div>
            </div>
            
            <div class="mt-4">
                <h5>How a Full App Would Work</h5>
                <ol>
                    <li>User completes survey (frontend)</li>
                    <li>Data sent to server (API call)</li>
                    <li>Server stores response (backend)</li>
                    <li>Dashboard requests data (API call)</li>
                    <li>Server returns data (backend)</li>
                    <li>Dashboard displays charts (frontend)</li>
                </ol>
            </div>
        </div>
        
        <div class="app-content">
            <h1 class="h3 mb-4 text-gray-800">Survey Response Summary</h1>
            
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="frontend-tab" data-bs-toggle="tab" data-bs-target="#frontend" type="button" role="tab">Frontend View</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="backend-tab" data-bs-toggle="tab" data-bs-target="#backend" type="button" role="tab">Backend Simulation</button>
                </li>
            </ul>
            
            <div class="tab-content mt-3" id="myTabContent">
                <div class="tab-pane fade show active" id="frontend" role="tabpanel">
                    <div class="row">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card primary h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <div class="text-xs text-uppercase mb-1 text-primary">Total Responses</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="totalResponses">248</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card success h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <div class="text-xs text-uppercase mb-1 text-success">Completion Rate</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">82%</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-check-circle fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card info h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <div class="text-xs text-uppercase mb-1 text-info">Avg. Time</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">7.2 min</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stats-card warning h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <div class="text-xs text-uppercase mb-1 text-warning">Avg. Rating</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">4.2/5</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-star fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-8">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold">Response Distribution</h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="responseChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold">Demographic Breakdown</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-4">
                                        <h6 class="font-weight-bold">By Age Group</h6>
                                        <div class="chart-container">
                                            <canvas id="ageChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="backend" role="tabpanel">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="m-0 font-weight-bold">Backend Simulation</h6>
                        </div>
                        <div class="card-body">
                            <p>This simulates what the backend would provide to the frontend:</p>
                            <pre class="bg-light p-3" id="backendData">
                                // API response would look something like this:
                                {
                                  "surveyId": "satisfaction-2023",
                                  "totalResponses": 248,
                                  "completionRate": 0.82,
                                  "questions": [
                                    {
                                      "id": "q1",
                                      "text": "How satisfied are you with our product?",
                                      "type": "multiple_choice",
                                      "responses": {
                                        "Very Satisfied": 65,
                                        "Satisfied": 48,
                                        "Neutral": 30,
                                        "Unsatisfied": 15,
                                        "Very Unsatisfied": 10
                                      }
                                    }
                                  ]
                                }
                            </pre>
                            <button class="btn btn-primary" id="loadData">Simulate Data Load from Backend</button>
                            <div class="mt-3 alert alert-info" id="simulationResult" style="display: none;">
                                Data loaded successfully from backend simulation!
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulated backend data storage
        const backendData = {
            totalResponses: 248,
            responses: [
                { id: 1, survey: "Employee Satisfaction", user: "John Smith", date: "2023-08-28" },
                { id: 2, survey: "Product Feedback", user: "Sarah Johnson", date: "2023-08-27" },
                { id: 3, survey: "Customer Experience", user: "Robert Davis", date: "2023-08-27" },
                { id: 4, survey: "Employee Satisfaction", user: "Maria Garcia", date: "2023-08-25" }
            ],
            questions: {
                q1: {
                    text: "How satisfied are you with our product?",
                    responses: {
                        "Very Satisfied": 65,
                        "Satisfied": 48,
                        "Neutral": 30,
                        "Unsatisfied": 15,
                        "Very Unsatisfied": 10
                    }
                }
            },
            demographics: {
                age: {
                    "18-24": 15,
                    "25-34": 35,
                    "35-44": 25,
                    "45-54": 15,
                    "55+": 10
                }
            }
        };

        // Simulated backend API
        const backendAPI = {
            getSurveyData: function() {
                return new Promise((resolve) => {
                    // Simulate API delay
                    setTimeout(() => {
                        resolve(backendData);
                    }, 1000);
                });
            },
            
            addResponse: function(response) {
                return new Promise((resolve) => {
                    // Simulate API delay
                    setTimeout(() => {
                        backendData.totalResponses++;
                        backendData.responses.unshift({
                            id: backendData.responses.length + 1,
                            survey: response.survey,
                            user: response.user,
                            date: new Date().toISOString().split('T')[0]
                        });
                        resolve({ success: true, newTotal: backendData.totalResponses });
                    }, 800);
                });
            }
        };

        // Frontend functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts with sample data
            initCharts();
            
            // Set up event listeners
            document.getElementById('simulateBackend').addEventListener('click', function() {
                document.getElementById('apiResponse').innerHTML = 
                    '<div class="alert alert-info mt-2">Simulating API call to /api/survey/data...</div>';
                
                backendAPI.getSurveyData().then(data => {
                    document.getElementById('apiResponse').innerHTML = 
                        `<div class="alert alert-success mt-2">Received response: ${data.totalResponses} total responses</div>`;
                });
            });
            
            document.getElementById('loadData').addEventListener('click', function() {
                const simulationResult = document.getElementById('simulationResult');
                simulationResult.style.display = 'block';
                
                backendAPI.getSurveyData().then(data => {
                    document.getElementById('totalResponses').textContent = data.totalResponses;
                    simulationResult.textContent = 
                        `Data loaded successfully! Total responses: ${data.totalResponses}`;
                });
            });
            
            // Initialize charts
            function initCharts() {
                // Response Over Time Chart
                const responseCtx = document.getElementById('responseChart').getContext('2d');
                new Chart(responseCtx, {
                    type: 'line',
                    data: {
                        labels: ['Aug 1', 'Aug 5', 'Aug 10', 'Aug 15', 'Aug 20', 'Aug 25', 'Today'],
                        datasets: [{
                            label: 'Responses',
                            data: [12, 19, 15, 25, 22, 30, 45],
                            borderColor: '#4e73df',
                            backgroundColor: 'rgba(78, 115, 223, 0.05)',
                            pointBackgroundColor: '#4e73df',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { stepSize: 10 }
                            }
                        }
                    }
                });

                // Age Demographic Chart
                const ageCtx = document.getElementById('ageChart').getContext('2d');
                new Chart(ageCtx, {
                    type: 'pie',
                    data: {
                        labels: ['18-24', '25-34', '35-44', '45-54', '55+'],
                        datasets: [{
                            data: [15, 35, 25, 15, 10],
                            backgroundColor: [
                                '#4e73df', '#1cc88a', '#36b9cc', '#f6c23e', '#858796'
                            ]
                        }]
                    },
                    options: {
                        maintainAspectRatio: false
                    }
                });
            }
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>
